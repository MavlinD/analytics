## Сервис анализа данных — Аналитика
### Назначение: 
**Построение [сводных таблиц](https://ru.wikipedia.org/wiki/Сводная_таблица)**.

Пусть каждая сумма обладает некоторым набором атрибутов,
например:

100 руб запланированы по договору А1, контрагента В1, в январе 2021 г., для объекта №1 и они заёмные.

Если множество строк _конечно_, то существует возможность построить **сводную таблицу** с переменным количеством категорий и группировок. При этом выборка может быть ограничена по периоду или любому доступному атрибуту суммы. 

---
### Протокол обмена данных

#### Сервис ожидает следующие данные:
1. Полный набор исходных данных
2. Период выборки
3. Список фильтруемых атрибутов
4. Набор колонок для вывода
5. Набор и порядок групп в строках

п.1, п.2, п.3 можно объединить предварительно выполнив на  источнике данных.

#### Пример исходных данных
```bash
100, А1, В1, 2021-01, Объект_1, заёмные
200, А2, В1, 2021-01, Объект_1, собственные
150, А1, В2, 2021-02, Объект_1, заёмные
```

При этом транзитивные атрибуты сумм, то есть те которые хранятся отдельно в справочных таблицах должны быть отправлены вместе с основными данными.

Например, если:
```bash
100, А1, В1, 2021-01, Объект_1, 1
200, А2, В1, 2021-01, Объект_2, 2
150, А1, В2, 2021-02, Объект_1, 1
```
Где последняя колонка атрибутов сумм содержит ссылки на справочную таблицу:

```bash
1, заемные
2, собственные
```

То, необходимо отправить полный набор данных.

#### Пример ответа

JSON, выгружен в XLSX файл или Google Docs.

[Примеры отчетов](wiki)

### Подробности реализации

Сервис предполагается как отдельно стоящий без жёстких связей с интегрируемой системой. Транспортный уровень обмена - http, https, возможно ftp, sftp.

Яpык программирования - python.

Доступ к API и готовым отчётам — авторизован. 

Выполненные отчёты кешируются.

---

### Последствия
Реализация сервиса позволит предоставить пользователю самостоятельно конструировать требуемый отчёт. 

_Весь массив данных может быть подвергнут анализу во множестве самых разных плоскостей._

Расчёт количества вариантов отчётов, задача комбинаторики, приведен в файле с вариантами.
Если я не ошибся, то при наличии 5-ти атрибутов у суммы можно получить около 3000 вариантов отчёта. При наличии 10, более 6 млн. \

Ничего нового не предлагаю, подобные возможности реализованы, например в 1С, MS Excel и других офисных программах.
